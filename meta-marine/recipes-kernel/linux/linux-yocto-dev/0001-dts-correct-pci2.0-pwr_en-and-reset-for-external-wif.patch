From 024ab01f2cb7647db134edf164a93e59eab2959c Mon Sep 17 00:00:00 2001
From: Trinh Viet Quang <vietquang0708@gmail.com>
Date: Mon, 1 Sep 2025 17:14:22 +0700
Subject: [PATCH] dts: correct pci2.0 pwr_en and reset for external wifi/module

Upstream-Status: Inappropriate [oe specific]

Signed-off-by: Trinh Viet Quang <vietquang0708@gmail.com>
---
 arch/arm64/boot/dts/rockchip/rk3588-nanopc-t6.dtsi | 6 ++++--
 1 file changed, 4 insertions(+), 2 deletions(-)

diff --git a/arch/arm64/boot/dts/rockchip/rk3588-nanopc-t6.dtsi b/arch/arm64/boot/dts/rockchip/rk3588-nanopc-t6.dtsi
index 728ff1c516c2..f1d838ca2031 100644
--- a/arch/arm64/boot/dts/rockchip/rk3588-nanopc-t6.dtsi
+++ b/arch/arm64/boot/dts/rockchip/rk3588-nanopc-t6.dtsi
@@ -224,7 +224,7 @@ vcc3v3_pcie2x1l1: regulator-vcc3v3-pcie2x1l1 {
 	vcc3v3_pcie2x1l2: regulator-vcc3v3-pcie2x1l2 {
 		compatible = "regulator-fixed";
 		enable-active-high;
-		gpio = <&gpio4 RK_PC2 GPIO_ACTIVE_HIGH>;
+		gpio = <&gpio1 RK_PA7 GPIO_ACTIVE_HIGH>;
 		pinctrl-names = "default";
 		pinctrl-0 = <&pcie_m2_2_pwren>;
 		regulator-name = "vcc3v3_pcie2x1l2";
@@ -698,6 +698,8 @@ &pcie2x1l2 {
 	// - Using GPIO4 RK_PA4 instead of RK_PA2 to
 	// control the power enable for lane 2
 	// - Lane 2 is used for wifi/bt module
+	// PWR_EN is connected to 1 RK_PA7
+	// - RESET is connected to 4 RK_PA2
 	//===============================================
 	reset-gpios = <&gpio4 RK_PA2 GPIO_ACTIVE_HIGH>;
 	vpcie3v3-supply = <&vcc3v3_pcie2x1l2>;
@@ -777,7 +779,7 @@ pcie_m2_1_pwren: pcie-m21-pwren {
 		};
 
 		pcie_m2_2_pwren: pcie-m22-pwren {
-			rockchip,pins = <4 RK_PC2 RK_FUNC_GPIO &pcfg_pull_none>;
+			rockchip,pins = <1 RK_PA7 RK_FUNC_GPIO &pcfg_pull_none>;
 		};
 	};
 
-- 
2.43.0

